import argparse
import sys,os

def main():
	parser = argparse.ArgumentParser()
	parser.add_argument(
		'-i','--input',help="input expression file generated by DESeq")
	parser.add_argument(
		'-o','--output',help="output file")
	args = parser.parse_args()
	output = open(args.output,"w")
	output.write("id" +"\t" + "pvalue" + "\t" + "logfoldchange" + "\n")
	with open(args.input,"r") as file:
		#print(file.readline())
		next(file)
		for record in file:
			line = record.split("\t")
			ids = line[9].split(";")[1].split("=")
			if line[0] == "sense" and ids[0] == "Name":
				# id pvalue foldchange
				if "Inf" not in line[-2] and "Inf" not in line[-3]:
					output.write(ids[1] + "\t" + line[-2] + "\t" + \
					line[-3] + "\n")
		
if __name__ == '__main__':
	main()
